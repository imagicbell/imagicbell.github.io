<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#fca5a5"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#fca5a5"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#fca5a5"/><meta property="og:type" content="website"/><meta property="og:title" content="Magicbell&#x27;s Website"/><meta property="og:url" content="/"/><meta property="og:description" content="Welcome to Magicbell&#x27;s Website, a place where you will know more about me from my professional experience and technical posts."/><meta property="og:image" content="/_next/static/images/avatar-b229a410146fdbebcd2035ef237d2ad0.jpg"/><title>How To Build My Own Website (1) - Next.js</title><meta name="description" content=""/><meta property="og:type" content="website"/><meta property="og:title" content="How To Build My Own Website (1) - Next.js"/><meta property="og:url" content="/posts/2021-3-10-build-my-website-nextjs"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="How To Build My Own Website (1) - Next.js"/><meta name="twitter:description" content=""/><meta name="twitter:image" content=""/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"/><script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script><meta name="next-head-count" content="29"/><link rel="preload" href="/_next/static/css/555b173cbb3b3b45df80.css" as="style"/><link rel="stylesheet" href="/_next/static/css/555b173cbb3b3b45df80.css" data-n-g=""/><link rel="preload" href="/_next/static/css/1a68ae46e299420c5773.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1a68ae46e299420c5773.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-e903dbcb0f26f07bddca.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-245f049e565ebf942e09.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.29f9e2f3d4a33bafbaa5.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.449049b2eba38352d9f4.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-8c930b98cabfdb7a913b.js" as="script"/><link rel="preload" href="/_next/static/chunks/cb1608f2.16ad8215560a85b40620.js" as="script"/><link rel="preload" href="/_next/static/chunks/a9a7754c.dec6fcf45fa1bcf7c2c8.js" as="script"/><link rel="preload" href="/_next/static/chunks/eda77bfa782fcce19c31e9417d5ccf0cdb548971.a781f33eec1afd4f91b3.js" as="script"/><link rel="preload" href="/_next/static/chunks/8410e8da63518be12bbb03b338cbeeeaa2b87d98.22e74b4b4510f82d44b7.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bslug%5D-a69c9fc3973d7a021c84.js" as="script"/></head><body><div id="__next"><div class="min-h-screen"><div class="w-full bg-theme-bg-strong flex justify-between items-end px-container py-4 text-theme-bg-strong-text"><h2 class="text-xl md:text-3xl font-bold tracking-tighter md:tracking-tight"><a class="" href="/">Magicbell&#x27;s Website</a></h2><nav class="text-base md:text-lg flex justify-end items-center"><a class="border-b-2 border-theme-bg-strong-text border-opacity-0 hover:border-opacity-100 mx-2 md:mx-4" href="/blog">Blog</a><a class="border-b-2 border-theme-bg-strong-text border-opacity-0 hover:border-opacity-100 mx-2 md:mx-4" href="/resume">Resume</a></nav></div><main class="relative container mx-auto my-14 px-container"><div class="mx-auto"><article class="mb-20"><div class="max-w-4xl mx-auto mb-20"><h1 class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-tighter leading-tight md:leading-none mb-6 text-center md:text-left">How To Build My Own Website (1) - Next.js</h1><div class="text-base text-theme-meta flex items-center"><time dateTime="2021-03-10T20:00:00+08:00">March	10, 2021</time><div class="w-px h-px border rounded mx-3 border-theme-meta"></div><span>5min read</span></div><hr class="border-theme-line mt-2"/></div><div class="max-w-3xl mx-auto"><div class="markdown-body markdown-styles_markdown__1x9gM"><h2 id="section-contents">Contents</h2>
<ol>
<li>The choice of Next.js</li>
<li><a href="/posts/2021-3-12-build-my-website-markdown" rel="noopener noreferrer" target="_blank">Parse and Display Markdown</a></li>
<li><a href="/posts/2021-3-14-build-my-website-style" rel="noopener noreferrer" target="_blank">Style my website</a></li>
<li><a href="/posts/2021-6-5-build-my-website-image-opti" rel="noopener noreferrer" target="_blank">Image Optimization</a></li>
</ol>
<p><br></p>
<p>I had always dreamed of building my own website, to express myself, to keep memory of what I have done, and to make others know me faster. Although I had self-learned web developing technologies, e.g. html/css, javascript, react, redux, jquery, etc, for a long time, there wasn't a golden chance to start this "huge" thing, regarding to the styling, routing, deploying and so on‚Ä¶ <em>All beginnings are hard</em>üòÑ</p>
<p>I used <a href="https://jekyllrb.com/" rel="noopener noreferrer" target="_blank">Jekyll</a> for my Blog. It's like this:</p>
<p><img loading="lazy" src="/blog/assets/img-my-website/1.jpg" alt=""></p>
<p>But I am not satisfied with it. To customize the page, I need to give a HTML file, which is inconvenient.</p>
<p>Recently I met with <a href="https://nextjs.org/" rel="noopener noreferrer" target="_blank">Next.js</a>. It is a <a href="https://reactjs.org/" rel="noopener noreferrer" target="_blank">React</a> framework, which means I can write <strong>React Components</strong>‚úåÔ∏è. After walking through its starter tutorial, which is to create a very simple <strong>blog app</strong>, I found it is the perfect framework that helps me to start my website building. </p>
<p>This article mainly talks about some <strong>basic features</strong> making it perfect for my website building. Next two articles: <a href="/posts/2021-3-12-build-my-website-markdown" rel="noopener noreferrer" target="_blank">1</a>, <a href="/posts/2021-3-14-build-my-website-style" rel="noopener noreferrer" target="_blank">2</a> will illustrate how I deal with <strong>Markdown</strong> and <strong>Style</strong>.</p>
<p>In this article, firstly I will talk about some <strong>basic features</strong> making it perfect for my website building. Then I will illustrate how I deploy it to <strong>Github Pages</strong>. </p>
<h2 id="section-page-based-routing-system">Page-based Routing System</h2>
<p>In <a href="https://nextjs.org/" rel="noopener noreferrer" target="_blank">Next.js</a>, a <a href="https://nextjs.org/docs/basic-features/pages" rel="noopener noreferrer" target="_blank">page</a> is a React Component placed under <code>/pages</code> directory. This hierarchy makes it clear to separate the page components with those feature components. </p>
<p>However, what the most powerful  is that it supports <a href="https://nextjs.org/docs/routing/dynamic-routes" rel="noopener noreferrer" target="_blank"><strong>dynamic routes</strong></a>. So:</p>
<ul>
<li><p>a page defined as <code>/pages/posts/[slug].js</code> can power all my blog post pages, like <code>/posts/2021-3-10-build-my-website-nextjs</code>, <code>/posts/2021-2-19-mock-requestanimationframe-in-jest</code>, etc.</p></li>
<li><p>a page defined as <code>/pages/blog/[[...page]].js</code> can power not only  <code>/blog/*</code>, but also <code>/blog</code> and <code>/blog/*/*</code>. So my paginated blog pages can be</p>
<ul>
<li><code>/blog</code></li>
<li><code>/blog/page/2</code>, <code>/blog/page/3</code>, <code>...</code></li>
<li><code>/blog/front-end</code>, <code>blog/unity</code></li>
<li><code>/blog/front-end/2</code>, <code>blog/unity/2</code>, <code>...</code></li></ul>
<p><del><em>In <code>next.config.js</code>, I can define <code>/blog/page/1</code> redirecting to <code>/blog</code>, <code>/blog/front-end/1</code> redirecting <code>blog/front-end</code>. This is common web flavored</em>.  </del></p>
<p><em>The <code>redirects</code> in next.config.js only works in Node.js environment, and do not affect client-side routing, see <a href="https://nextjs.org/docs/api-reference/next.config.js/redirects" rel="noopener noreferrer" target="_blank">this</a>. My website is statically exported, so when it is published on Github Pages, the <code>redirects</code> fails. Also I tried <code>rewrites</code>, but the result is not what I want, and it also fails to refresh by browser.</em></p></li>
<li><p>in React Component, I can obtain the route data by <code>query</code> object, which is accessed by the <code>useRouter</code> hook in <a href="https://nextjs.org/docs/api-reference/next/router" rel="noopener noreferrer" target="_blank"><code>next/router</code></a>. So for the above multi-format routes, I can distinguish them by:</p>
<pre><code class="javascript language-javascript">// "/blog"
query: { "page": false }
query: { "page": null }
query: { "page": [] }
query: { "page": undefined }

// "/blog/page/2", "/blog/page/3" ...
query: { "page": [ 'page', '2'] }
query: { "page": [ 'page', '3'] }

// "/blog/front-end", "/blog/unity"
query: { "page": [ 'front-end' ] }
query: { "page": [ 'unity' ] }

// "/blog/front-end/2", "/blog/unity/2"
query: { "page": [ 'front-end', '2' ] }
query: { "page": [ 'unity', '2' ] }</code></pre></li>
</ul>
<h2 id="section-pre-rendering">Pre-rendering</h2>
<p><a href="https://nextjs.org/" rel="noopener noreferrer" target="_blank">Next.js</a> generates HTML for each page in advance. There are two forms: <strong>Static Generation</strong> and <strong>Server-side Rendering</strong>. </p>
<blockquote>
  <p>The difference is in <strong>when</strong> it generates the HTML for a page.</p>
  <ul>
  <li><p><a href="https://nextjs.org/docs/basic-features/pages#static-generation-recommended" rel="noopener noreferrer" target="_blank"><strong>Static Generation (Recommended)</strong></a>: The HTML is generated at <strong>build time</strong> and will be reused on each request.</p></li>
  <li><p><a href="https://nextjs.org/docs/basic-features/pages#server-side-rendering" rel="noopener noreferrer" target="_blank"><strong>Server-side Rendering</strong></a>: The HTML is generated on <strong>each request</strong>.</p></li>
  </ul>
</blockquote>
<p>Commonly a personal website is static, which is generated at build time. </p>
<h3 id="section-data-fetching">Data Fetching</h3>
<p><a href="https://nextjs.org/" rel="noopener noreferrer" target="_blank">Next.js</a> also provides two ways to <a href="https://nextjs.org/docs/basic-features/data-fetching" rel="noopener noreferrer" target="_blank">fetch external data</a> for pre-rendering, with which I can generate blog pages by reading the local markdown files. </p>
<ol>
<li><p><code>getStaticPaths</code> to specify which paths to pre-render. For example, in <code>/pages/posts/[slug].js</code>, the below code includes paths for all post pages.</p>
<pre><code class="javascript language-javascript"> export async function getStaticPaths() {
   const posts = getAllPosts(['slug'])

return {
     paths: posts.map((post) =&gt; {
       return {
         params: {
           slug: post.slug,
         },
       }
     }),
     fallback: false,
   }
 }</code></pre></li>
<li><p><code>getStaticProps</code> to pass external data to the <code>props</code> of the page's React Component. For example, in <code>/pages/posts/[slug].js</code>, the below code passes the <code>post</code> data to the <code>Post</code> component for rendering.</p>
<pre><code class="javascript language-javascript">  function Post({ post }) {
    //render the post
  }

  export async function getStaticProps({ params }) {
    let post = getPostBySlug(params.slug);
    return {
      props: {
        post,
      }
    }
  }</code></pre>
<p>The parameter <code>params</code> is from the <code>params</code> in the returned object of <code>getStaticPaths</code>.</p></li>
</ol>
<h2 id="section-fast-refresh">Fast Refresh</h2>
<p><a href="https://nextjs.org/" rel="noopener noreferrer" target="_blank">Next.js</a> enables <a href="https://nextjs.org/docs/basic-features/fast-refresh" rel="noopener noreferrer" target="_blank">Fast Refresh</a> to allow me to glance at what I have just done. Think about this scenario: </p>
<p><em>I am writing this blog, and I want to see what it is like when it deploys.</em></p>
<p><em>ps. <a href="[Jekyll](https://jekyllrb.com/)" rel="noopener noreferrer" target="_blank">Jekyll</a> enables fast refresh, too.</em></p>
<h2 id="section-its-react">It's React!</h2>
<p>There is no need to illustrate how <a href="https://reactjs.org/" rel="noopener noreferrer" target="_blank">React</a> makes it easier to develop web pages here. I just want to say it is at the top of my list.</p>
<h2 id="section-deploy-to-github-pages">Deploy To Github Pages</h2>
<p>Next.js app is recommended to deploy on <a href="https://vercel.com/" rel="noopener noreferrer" target="_blank">Vercel</a>, because it is an all-in-one platform developed by the same team. However, in spite of  <a href="https://vercel.com/" rel="noopener noreferrer" target="_blank">Vercel</a>, I also want to deploy it on Github Pages, where my old Blog is, until I have my own domain.</p>
<p>The following steps show how I did to deploy to gh pages:</p>
<ol>
<li><p>Create a github repository, named with <code>[github-user-name].github.io</code>. If you don't follow this template, the pages will be under a subpath, e.g.. <code>[github-user-name].github.io/[custom-github-repository-name]</code>, which may bring inconvenience in path.</p></li>
<li><p>Set the remote origin to github repository.</p></li>
<li><p>Do some customized configuration in <code>next.config.js</code>, like adding environment variables, plugins, etc.</p></li>
<li><p>Install <a href="https://www.npmjs.com/package/rimraf" rel="noopener noreferrer" target="_blank">rimraf</a>, <a href="https://www.npmjs.com/package/gh-pages" rel="noopener noreferrer" target="_blank">gh-pages</a>.</p></li>
<li><p>Add scripts in <code>package.json</code>:</p></li>
</ol>
<pre><code class="json language-json">   {
       "scripts": {
       "deploy": "rm -rf node_modules/.cache &amp;&amp; rimraf out &amp;&amp; next build &amp;&amp; next export &amp;&amp; touch out/.nojekyll &amp;&amp; gh-pages -d out -t true"
     },
   }</code></pre>
<ol start="6">
<li>Run </li>
</ol>
<pre><code class="shell language-shell">   npm run deploy</code></pre>
<ol start="7">
<li>Change github repository <strong>Settings</strong>. Navigate to <strong>GitHub Pages</strong>, set the <strong>Source</strong> to be branch <strong>"gh-pages"</strong>, directory <strong>/(root)</strong>, and click <strong>Save</strong>.</li>
</ol>
<h2 id="section-why-not-use-existing-website-builder">Why Not Use Existing Website Builder</h2>
<h4 id="section-1-it-is-pricey">1. It is Pricey!</h4>
<p>Although some popular website builders, like <a href="https://www.wix.com/" rel="noopener noreferrer" target="_blank">Wix</a> and <a href="https://wordpress.com/" rel="noopener noreferrer" target="_blank">WordPress</a>, provide free services to create websites, the services are limited, unless you purchase for the Premium Plans. <em>This is always what happens</em>üòÖ. ‚Äã</p>
<h4 id="section-2-i-am-not-advertising">2. I am Not Advertising.</h4>
<p>In my plans for the website, there is no intension for any advertisement. So it doesn't need to be fancy. In fact, I prefer it to be simple but tech-favored.</p>
<h4 id="section-3-it-is-not-under-my-control">3. It is Not Under My Control.</h4>
<p>There are indeed many templates on those website builders, which save us plenty of time to design and development websites. But they are just as what they are. I'd like to do what ever I want on my own website. It should be limitlessüòâ.</p></div></div></article><div><div class="max-w-3xl mx-auto"><div><hr class="border-theme-line mt-6 mb-6"/><div class="flex leading-6 justify-center"><button aria-label="facebook" class="react-share__ShareButton mx-4" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="40" height="40"><circle cx="32" cy="32" r="31" fill="#3b5998"></circle><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton mx-4" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="40" height="40"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="linkedin" class="react-share__ShareButton mx-4" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="40" height="40"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="weibo" class="react-share__ShareButton mx-4" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="40" height="40"><circle cx="32" cy="32" r="31" fill="#CD201F"></circle><path d="M40.9756152,15.0217119 C40.5000732,15.0546301 39.9999314,15.1204666 39.5325878,15.2192213 C38.6634928,15.4085016 38.0977589,16.2643757 38.2863368,17.1284787 C38.4667163,18.0008129 39.3194143,18.5686519 40.1885094,18.3793715 C42.8613908,17.8115326 45.7720411,18.6427174 47.7316073,20.8153207 C49.6911735,22.996153 50.2077122,25.975254 49.3714112,28.5840234 C49.1008441,29.4316684 49.5763861,30.3533789 50.4208857,30.6249537 C51.2653852,30.8965286 52.1754769,30.4192153 52.4542425,29.5715703 C53.6349013,25.9011885 52.9133876,21.7699494 50.1585171,18.7085538 C48.0923641,16.4042776 45.2063093,15.1533848 42.3530505,15.0217119 C41.8775084,14.9970227 41.4511594,14.9887937 40.9756152,15.0217119 Z M27.9227762,19.8277737 C24.9957268,20.140498 20.863421,22.4365431 17.2312548,26.0822378 C13.2711279,30.0571148 11,34.2871065 11,37.9328012 C11,44.9032373 19.8713401,49.125 28.5786978,49.125 C39.9917329,49.125 47.600423,42.4261409 47.600423,37.1427636 C47.600423,33.9496952 44.9603397,32.1638816 42.549827,31.4149913 C41.9594976,31.2339421 41.5167516,31.1434164 41.8283133,30.3616079 C42.5006339,28.66632 42.6236176,27.1932286 41.8939054,26.1480742 C40.5328692,24.1894405 36.7203236,24.2881952 32.448635,26.0822378 C32.448635,26.0822378 31.1203949,26.6912261 31.4647526,25.6213825 C32.1206742,23.4981576 32.0304845,21.712342 31.0056075,20.6836478 C30.2840938,19.9512176 29.2510184,19.6878718 27.9227762,19.8277737 Z M42.0906819,20.6836478 C41.6233383,20.6589586 41.1723917,20.716566 40.7132466,20.8153207 C39.9671353,20.9716828 39.4997917,21.7781784 39.6637721,22.5270687 C39.8277525,23.275959 40.5574647,23.7450433 41.303576,23.5804521 C42.1972686,23.3911718 43.2057485,23.6380596 43.8616701,24.3704897 C44.5175916,25.1029198 44.6733735,26.0657797 44.3864073,26.9381118 C44.1486363,27.6705419 44.5093932,28.4770397 45.2391054,28.7156963 C45.9688176,28.9461239 46.780521,28.5922524 47.0100936,27.8598223 C47.584026,26.0740087 47.2396661,24.0248493 45.8950269,22.5270687 C44.886547,21.4078489 43.4845162,20.7494842 42.0906819,20.6836478 Z M29.496988,29.9665891 C35.3100922,30.1723275 39.9917329,33.0691319 40.3852858,37.0769272 C40.8362324,41.6607904 35.5970585,45.9319315 28.6442899,46.6232144 C21.6915214,47.3144973 15.6488446,44.154347 15.197898,39.5787128 C14.7469514,34.9948495 20.059916,30.7237084 27.004486,30.0324256 C27.8735831,29.950131 28.6688875,29.9336709 29.496988,29.9665891 Z M25.5614586,34.3776322 C23.183744,34.5916017 20.9372116,35.9577073 19.9205332,37.9328012 C18.5348994,40.6238672 19.9041362,43.6029661 23.0689567,44.582284 C26.340366,45.5945202 30.1857056,44.0638213 31.5303448,41.1587879 C32.8503864,38.3195909 31.1613894,35.3734082 27.9227762,34.5751416 C27.1438688,34.3776322 26.356763,34.3035667 25.5614586,34.3776322 Z M24.052839,38.7228388 C24.3316067,38.7310678 24.5857748,38.8215935 24.8399449,38.9203482 C25.8648218,39.3400561 26.1845841,40.4428158 25.5614586,41.4221338 C24.9219361,42.3932227 23.5690963,42.8623069 22.5442194,42.4096807 C21.5357395,41.9652856 21.2487754,40.8542948 21.8882979,39.9078951 C22.3638421,39.2001542 23.2247386,38.7146097 24.052839,38.7228388 Z" fill="white"></path></svg></button></div></div><div><hr class="border-theme-line mt-6 mb-6"/><div class="flex leading-6 font-medium text-lg"><a class="flex mr-8 transition-colors duration-200 text-theme-link hover:text-theme-link-highlight" href="/posts/2021-2-19-mock-requestanimationframe-in-jest"><span aria-hidden="true" class="mr-2">‚Üê</span>Previous Post</a><a class="flex text-right ml-auto transition-colors duration-200 text-theme-link hover:text-theme-link-highlight" href="/posts/2021-3-12-build-my-website-markdown">Next Post<span aria-hidden="true" class="ml-2">‚Üí</span></a></div></div><div><hr class="border-theme-line mt-6 mb-6"/><div shortname="https-imagicbell-github-io" config="[object Object]" id="disqus_thread"></div></div></div><div class="max-w-5xl mx-auto"><div><hr class="border-theme-line mt-6 mb-6"/><div class="pt-4 pb-6"><h2 class="text-xl font-medium leading-tight md:leading-none mb-6 text-center">MORE FROM THE BLOG</h2><div class="grid grid-flow-row grid-cols-2 grid-rows-2 lg:grid-cols-4 lg:grid-rows-1 gap-4"><div class="relative h-60 border rounded border-theme-border cursor-pointer hover:shadow-md p-2"><div class="absolute left-0 top-0 w-full h-24 bg-theme-bg"></div><div class="relative h-20 mb-2 overflow-hidden"><p class="absolute bottom-0 text-lg text-left font-medium">How To Build My Own...</p></div><div class="overflow-hidden h-24"><div class="markdown-body markdown-styles_markdown__1x9gM">This article illustrates how I applied image optimization to improve the performance of my website.</div></div><div class="text-xs text-theme-meta absolute bottom-2 flex flex-col sm:flex-row sm:items-center"><time dateTime="2021-06-05T20:00:00+08:00">June	5, 2021</time><div class="w-px h-px border rounded mx-2 border-theme-meta hidden sm:block"></div><span>2min read</span></div><a class="absolute top-0 left-0 w-full h-full" href="/posts/2021-6-5-build-my-website-image-opti"></a></div><div class="relative h-60 border rounded border-theme-border cursor-pointer hover:shadow-md p-2"><div class="absolute left-0 top-0 w-full h-24 bg-theme-bg"></div><div class="relative h-20 mb-2 overflow-hidden"><p class="absolute bottom-0 text-lg text-left font-medium">How To Build My Own...</p></div><div class="overflow-hidden h-24"><div class="markdown-body markdown-styles_markdown__1x9gM">This article illustrates how I style my own website using Tailwindcss framework, make theme color configurable, and apply interactive animations.</div></div><div class="text-xs text-theme-meta absolute bottom-2 flex flex-col sm:flex-row sm:items-center"><time dateTime="2021-03-14T20:00:00+08:00">March	14, 2021</time><div class="w-px h-px border rounded mx-2 border-theme-meta hidden sm:block"></div><span>2min read</span></div><a class="absolute top-0 left-0 w-full h-full" href="/posts/2021-3-14-build-my-website-style"></a></div><div class="relative h-60 border rounded border-theme-border cursor-pointer hover:shadow-md p-2"><div class="absolute left-0 top-0 w-full h-24 bg-theme-bg"></div><div class="relative h-20 mb-2 overflow-hidden"><p class="absolute bottom-0 text-lg text-left font-medium">How To Build My Own...</p></div><div class="overflow-hidden h-24"><div class="markdown-body markdown-styles_markdown__1x9gM"><p>Parsing and displaying Markdown files are one of the most important things in building a personal website, because all my...</p></div></div><div class="text-xs text-theme-meta absolute bottom-2 flex flex-col sm:flex-row sm:items-center"><time dateTime="2021-03-12T20:00:00+08:00">March	12, 2021</time><div class="w-px h-px border rounded mx-2 border-theme-meta hidden sm:block"></div><span>3min read</span></div><a class="absolute top-0 left-0 w-full h-full" href="/posts/2021-3-12-build-my-website-markdown"></a></div><div class="relative h-60 border rounded border-theme-border cursor-pointer hover:shadow-md p-2"><div class="absolute left-0 top-0 w-full h-24 bg-theme-bg"></div><div class="relative h-20 mb-2 overflow-hidden"><p class="absolute bottom-0 text-lg text-left font-medium">Mock requestAnimationFrame in Jest</p></div><div class="overflow-hidden h-24"><div class="markdown-body markdown-styles_markdown__1x9gM"><p>When I wrote test for my tiny rhythm game, I realized that all the browser based actions needed to be...</p></div></div><div class="text-xs text-theme-meta absolute bottom-2 flex flex-col sm:flex-row sm:items-center"><time dateTime="2021-02-19T10:00:00+08:00">February	19, 2021</time><div class="w-px h-px border rounded mx-2 border-theme-meta hidden sm:block"></div><span>1min read</span></div><a class="absolute top-0 left-0 w-full h-full" href="/posts/2021-2-19-mock-requestanimationframe-in-jest"></a></div></div></div></div></div></div></div></main></div><footer class="w-full bg-theme-bg-strong px-container py-4 text-theme-bg-strong-text flex flex-col items-center"><nav class="text-base md:text-lg flex justify-end items-center"><a class="border-b-2 border-theme-bg-strong-text border-opacity-0 hover:border-opacity-100 mx-2 md:mx-4" href="/">Home</a><a class="border-b-2 border-theme-bg-strong-text border-opacity-0 hover:border-opacity-100 mx-2 md:mx-4" href="/blog">Blog</a><a class="border-b-2 border-theme-bg-strong-text border-opacity-0 hover:border-opacity-100 mx-2 md:mx-4" href="/resume">Resume</a></nav><div class="w-full my-2 flex flex-col sm:flex-row justify-between"><div class="text-xs">¬© 2021 Ling Mao. Powered by <a class="hover:underline" href="https://reactjs.org/" rel="nofollow">React</a> &amp; <a class="hover:underline" href="https://nextjs.org/" rel="nofollow">Next.js</a>.</div><div class="flex justify-center sm:justify-end items-center"><a href="mailto:sophieml1989@gmail.com" class="mr-4"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-w-16 h-6" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" color="#fff"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></a><a href="https://www.linkedin.com/in/magicbell" class="mr-4"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin-in" class="svg-inline--fa fa-linkedin-in fa-w-14 h-6" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" color="#fff"><path fill="currentColor" d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg></a><a href="https://github.com/imagicbell" class="mr-4"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16 h-6" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" color="#fff"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"How To Build My Own Website (1) - Next.js","date":"2021-03-10T20:00:00+08:00","slug":"2021-3-10-build-my-website-nextjs","categories":["Front-End"],"readTime":5,"content":"\u003ch2 id=\"section-contents\"\u003eContents\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eThe choice of Next.js\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/posts/2021-3-12-build-my-website-markdown\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eParse and Display Markdown\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/posts/2021-3-14-build-my-website-style\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eStyle my website\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/posts/2021-6-5-build-my-website-image-opti\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eImage Optimization\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003eI had always dreamed of building my own website, to express myself, to keep memory of what I have done, and to make others know me faster. Although I had self-learned web developing technologies, e.g. html/css, javascript, react, redux, jquery, etc, for a long time, there wasn't a golden chance to start this \"huge\" thing, regarding to the styling, routing, deploying and so on‚Ä¶ \u003cem\u003eAll beginnings are hard\u003c/em\u003eüòÑ\u003c/p\u003e\n\u003cp\u003eI used \u003ca href=\"https://jekyllrb.com/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eJekyll\u003c/a\u003e for my Blog. It's like this:\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/blog/assets/img-my-website/1.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eBut I am not satisfied with it. To customize the page, I need to give a HTML file, which is inconvenient.\u003c/p\u003e\n\u003cp\u003eRecently I met with \u003ca href=\"https://nextjs.org/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eNext.js\u003c/a\u003e. It is a \u003ca href=\"https://reactjs.org/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eReact\u003c/a\u003e framework, which means I can write \u003cstrong\u003eReact Components\u003c/strong\u003e‚úåÔ∏è. After walking through its starter tutorial, which is to create a very simple \u003cstrong\u003eblog app\u003c/strong\u003e, I found it is the perfect framework that helps me to start my website building. \u003c/p\u003e\n\u003cp\u003eThis article mainly talks about some \u003cstrong\u003ebasic features\u003c/strong\u003e making it perfect for my website building. Next two articles: \u003ca href=\"/posts/2021-3-12-build-my-website-markdown\" rel=\"noopener noreferrer\" target=\"_blank\"\u003e1\u003c/a\u003e, \u003ca href=\"/posts/2021-3-14-build-my-website-style\" rel=\"noopener noreferrer\" target=\"_blank\"\u003e2\u003c/a\u003e will illustrate how I deal with \u003cstrong\u003eMarkdown\u003c/strong\u003e and \u003cstrong\u003eStyle\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eIn this article, firstly I will talk about some \u003cstrong\u003ebasic features\u003c/strong\u003e making it perfect for my website building. Then I will illustrate how I deploy it to \u003cstrong\u003eGithub Pages\u003c/strong\u003e. \u003c/p\u003e\n\u003ch2 id=\"section-page-based-routing-system\"\u003ePage-based Routing System\u003c/h2\u003e\n\u003cp\u003eIn \u003ca href=\"https://nextjs.org/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eNext.js\u003c/a\u003e, a \u003ca href=\"https://nextjs.org/docs/basic-features/pages\" rel=\"noopener noreferrer\" target=\"_blank\"\u003epage\u003c/a\u003e is a React Component placed under \u003ccode\u003e/pages\u003c/code\u003e directory. This hierarchy makes it clear to separate the page components with those feature components. \u003c/p\u003e\n\u003cp\u003eHowever, what the most powerful  is that it supports \u003ca href=\"https://nextjs.org/docs/routing/dynamic-routes\" rel=\"noopener noreferrer\" target=\"_blank\"\u003e\u003cstrong\u003edynamic routes\u003c/strong\u003e\u003c/a\u003e. So:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003ea page defined as \u003ccode\u003e/pages/posts/[slug].js\u003c/code\u003e can power all my blog post pages, like \u003ccode\u003e/posts/2021-3-10-build-my-website-nextjs\u003c/code\u003e, \u003ccode\u003e/posts/2021-2-19-mock-requestanimationframe-in-jest\u003c/code\u003e, etc.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003ea page defined as \u003ccode\u003e/pages/blog/[[...page]].js\u003c/code\u003e can power not only  \u003ccode\u003e/blog/*\u003c/code\u003e, but also \u003ccode\u003e/blog\u003c/code\u003e and \u003ccode\u003e/blog/*/*\u003c/code\u003e. So my paginated blog pages can be\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e/blog\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/blog/page/2\u003c/code\u003e, \u003ccode\u003e/blog/page/3\u003c/code\u003e, \u003ccode\u003e...\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/blog/front-end\u003c/code\u003e, \u003ccode\u003eblog/unity\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e/blog/front-end/2\u003c/code\u003e, \u003ccode\u003eblog/unity/2\u003c/code\u003e, \u003ccode\u003e...\u003c/code\u003e\u003c/li\u003e\u003c/ul\u003e\n\u003cp\u003e\u003cdel\u003e\u003cem\u003eIn \u003ccode\u003enext.config.js\u003c/code\u003e, I can define \u003ccode\u003e/blog/page/1\u003c/code\u003e redirecting to \u003ccode\u003e/blog\u003c/code\u003e, \u003ccode\u003e/blog/front-end/1\u003c/code\u003e redirecting \u003ccode\u003eblog/front-end\u003c/code\u003e. This is common web flavored\u003c/em\u003e.  \u003c/del\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eThe \u003ccode\u003eredirects\u003c/code\u003e in next.config.js only works in Node.js environment, and do not affect client-side routing, see \u003ca href=\"https://nextjs.org/docs/api-reference/next.config.js/redirects\" rel=\"noopener noreferrer\" target=\"_blank\"\u003ethis\u003c/a\u003e. My website is statically exported, so when it is published on Github Pages, the \u003ccode\u003eredirects\u003c/code\u003e fails. Also I tried \u003ccode\u003erewrites\u003c/code\u003e, but the result is not what I want, and it also fails to refresh by browser.\u003c/em\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003ein React Component, I can obtain the route data by \u003ccode\u003equery\u003c/code\u003e object, which is accessed by the \u003ccode\u003euseRouter\u003c/code\u003e hook in \u003ca href=\"https://nextjs.org/docs/api-reference/next/router\" rel=\"noopener noreferrer\" target=\"_blank\"\u003e\u003ccode\u003enext/router\u003c/code\u003e\u003c/a\u003e. So for the above multi-format routes, I can distinguish them by:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"javascript language-javascript\"\u003e// \"/blog\"\nquery: { \"page\": false }\nquery: { \"page\": null }\nquery: { \"page\": [] }\nquery: { \"page\": undefined }\n\n// \"/blog/page/2\", \"/blog/page/3\" ...\nquery: { \"page\": [ 'page', '2'] }\nquery: { \"page\": [ 'page', '3'] }\n\n// \"/blog/front-end\", \"/blog/unity\"\nquery: { \"page\": [ 'front-end' ] }\nquery: { \"page\": [ 'unity' ] }\n\n// \"/blog/front-end/2\", \"/blog/unity/2\"\nquery: { \"page\": [ 'front-end', '2' ] }\nquery: { \"page\": [ 'unity', '2' ] }\u003c/code\u003e\u003c/pre\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"section-pre-rendering\"\u003ePre-rendering\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://nextjs.org/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eNext.js\u003c/a\u003e generates HTML for each page in advance. There are two forms: \u003cstrong\u003eStatic Generation\u003c/strong\u003e and \u003cstrong\u003eServer-side Rendering\u003c/strong\u003e. \u003c/p\u003e\n\u003cblockquote\u003e\n  \u003cp\u003eThe difference is in \u003cstrong\u003ewhen\u003c/strong\u003e it generates the HTML for a page.\u003c/p\u003e\n  \u003cul\u003e\n  \u003cli\u003e\u003cp\u003e\u003ca href=\"https://nextjs.org/docs/basic-features/pages#static-generation-recommended\" rel=\"noopener noreferrer\" target=\"_blank\"\u003e\u003cstrong\u003eStatic Generation (Recommended)\u003c/strong\u003e\u003c/a\u003e: The HTML is generated at \u003cstrong\u003ebuild time\u003c/strong\u003e and will be reused on each request.\u003c/p\u003e\u003c/li\u003e\n  \u003cli\u003e\u003cp\u003e\u003ca href=\"https://nextjs.org/docs/basic-features/pages#server-side-rendering\" rel=\"noopener noreferrer\" target=\"_blank\"\u003e\u003cstrong\u003eServer-side Rendering\u003c/strong\u003e\u003c/a\u003e: The HTML is generated on \u003cstrong\u003eeach request\u003c/strong\u003e.\u003c/p\u003e\u003c/li\u003e\n  \u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eCommonly a personal website is static, which is generated at build time. \u003c/p\u003e\n\u003ch3 id=\"section-data-fetching\"\u003eData Fetching\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://nextjs.org/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eNext.js\u003c/a\u003e also provides two ways to \u003ca href=\"https://nextjs.org/docs/basic-features/data-fetching\" rel=\"noopener noreferrer\" target=\"_blank\"\u003efetch external data\u003c/a\u003e for pre-rendering, with which I can generate blog pages by reading the local markdown files. \u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003egetStaticPaths\u003c/code\u003e to specify which paths to pre-render. For example, in \u003ccode\u003e/pages/posts/[slug].js\u003c/code\u003e, the below code includes paths for all post pages.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"javascript language-javascript\"\u003e export async function getStaticPaths() {\n   const posts = getAllPosts(['slug'])\n\nreturn {\n     paths: posts.map((post) =\u0026gt; {\n       return {\n         params: {\n           slug: post.slug,\n         },\n       }\n     }),\n     fallback: false,\n   }\n }\u003c/code\u003e\u003c/pre\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003egetStaticProps\u003c/code\u003e to pass external data to the \u003ccode\u003eprops\u003c/code\u003e of the page's React Component. For example, in \u003ccode\u003e/pages/posts/[slug].js\u003c/code\u003e, the below code passes the \u003ccode\u003epost\u003c/code\u003e data to the \u003ccode\u003ePost\u003c/code\u003e component for rendering.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"javascript language-javascript\"\u003e  function Post({ post }) {\n    //render the post\n  }\n\n  export async function getStaticProps({ params }) {\n    let post = getPostBySlug(params.slug);\n    return {\n      props: {\n        post,\n      }\n    }\n  }\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe parameter \u003ccode\u003eparams\u003c/code\u003e is from the \u003ccode\u003eparams\u003c/code\u003e in the returned object of \u003ccode\u003egetStaticPaths\u003c/code\u003e.\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"section-fast-refresh\"\u003eFast Refresh\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://nextjs.org/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eNext.js\u003c/a\u003e enables \u003ca href=\"https://nextjs.org/docs/basic-features/fast-refresh\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eFast Refresh\u003c/a\u003e to allow me to glance at what I have just done. Think about this scenario: \u003c/p\u003e\n\u003cp\u003e\u003cem\u003eI am writing this blog, and I want to see what it is like when it deploys.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eps. \u003ca href=\"[Jekyll](https://jekyllrb.com/)\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eJekyll\u003c/a\u003e enables fast refresh, too.\u003c/em\u003e\u003c/p\u003e\n\u003ch2 id=\"section-its-react\"\u003eIt's React!\u003c/h2\u003e\n\u003cp\u003eThere is no need to illustrate how \u003ca href=\"https://reactjs.org/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eReact\u003c/a\u003e makes it easier to develop web pages here. I just want to say it is at the top of my list.\u003c/p\u003e\n\u003ch2 id=\"section-deploy-to-github-pages\"\u003eDeploy To Github Pages\u003c/h2\u003e\n\u003cp\u003eNext.js app is recommended to deploy on \u003ca href=\"https://vercel.com/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eVercel\u003c/a\u003e, because it is an all-in-one platform developed by the same team. However, in spite of  \u003ca href=\"https://vercel.com/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eVercel\u003c/a\u003e, I also want to deploy it on Github Pages, where my old Blog is, until I have my own domain.\u003c/p\u003e\n\u003cp\u003eThe following steps show how I did to deploy to gh pages:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cp\u003eCreate a github repository, named with \u003ccode\u003e[github-user-name].github.io\u003c/code\u003e. If you don't follow this template, the pages will be under a subpath, e.g.. \u003ccode\u003e[github-user-name].github.io/[custom-github-repository-name]\u003c/code\u003e, which may bring inconvenience in path.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eSet the remote origin to github repository.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eDo some customized configuration in \u003ccode\u003enext.config.js\u003c/code\u003e, like adding environment variables, plugins, etc.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eInstall \u003ca href=\"https://www.npmjs.com/package/rimraf\" rel=\"noopener noreferrer\" target=\"_blank\"\u003erimraf\u003c/a\u003e, \u003ca href=\"https://www.npmjs.com/package/gh-pages\" rel=\"noopener noreferrer\" target=\"_blank\"\u003egh-pages\u003c/a\u003e.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eAdd scripts in \u003ccode\u003epackage.json\u003c/code\u003e:\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"json language-json\"\u003e   {\n       \"scripts\": {\n       \"deploy\": \"rm -rf node_modules/.cache \u0026amp;\u0026amp; rimraf out \u0026amp;\u0026amp; next build \u0026amp;\u0026amp; next export \u0026amp;\u0026amp; touch out/.nojekyll \u0026amp;\u0026amp; gh-pages -d out -t true\"\n     },\n   }\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"6\"\u003e\n\u003cli\u003eRun \u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"shell language-shell\"\u003e   npm run deploy\u003c/code\u003e\u003c/pre\u003e\n\u003col start=\"7\"\u003e\n\u003cli\u003eChange github repository \u003cstrong\u003eSettings\u003c/strong\u003e. Navigate to \u003cstrong\u003eGitHub Pages\u003c/strong\u003e, set the \u003cstrong\u003eSource\u003c/strong\u003e to be branch \u003cstrong\u003e\"gh-pages\"\u003c/strong\u003e, directory \u003cstrong\u003e/(root)\u003c/strong\u003e, and click \u003cstrong\u003eSave\u003c/strong\u003e.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"section-why-not-use-existing-website-builder\"\u003eWhy Not Use Existing Website Builder\u003c/h2\u003e\n\u003ch4 id=\"section-1-it-is-pricey\"\u003e1. It is Pricey!\u003c/h4\u003e\n\u003cp\u003eAlthough some popular website builders, like \u003ca href=\"https://www.wix.com/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eWix\u003c/a\u003e and \u003ca href=\"https://wordpress.com/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eWordPress\u003c/a\u003e, provide free services to create websites, the services are limited, unless you purchase for the Premium Plans. \u003cem\u003eThis is always what happens\u003c/em\u003eüòÖ. ‚Äã\u003c/p\u003e\n\u003ch4 id=\"section-2-i-am-not-advertising\"\u003e2. I am Not Advertising.\u003c/h4\u003e\n\u003cp\u003eIn my plans for the website, there is no intension for any advertisement. So it doesn't need to be fancy. In fact, I prefer it to be simple but tech-favored.\u003c/p\u003e\n\u003ch4 id=\"section-3-it-is-not-under-my-control\"\u003e3. It is Not Under My Control.\u003c/h4\u003e\n\u003cp\u003eThere are indeed many templates on those website builders, which save us plenty of time to design and development websites. But they are just as what they are. I'd like to do what ever I want on my own website. It should be limitlessüòâ.\u003c/p\u003e"},"postNav":{"previous":"/posts/2021-2-19-mock-requestanimationframe-in-jest","next":"/posts/2021-3-12-build-my-website-markdown"},"morePosts":[{"slug":"2021-6-5-build-my-website-image-opti","title":"How To Build My Own Website (4) - Image Optimization","date":"2021-06-05T20:00:00+08:00","locale":"en","excerpt":"This article illustrates how I applied image optimization to improve the performance of my website.","readTime":2},{"slug":"2021-3-14-build-my-website-style","title":"How To Build My Own Website (3) - Style","date":"2021-03-14T20:00:00+08:00","locale":"en","excerpt":"This article illustrates how I style my own website using Tailwindcss framework, make theme color configurable, and apply interactive animations.","readTime":2},{"slug":"2021-3-12-build-my-website-markdown","title":"How To Build My Own Website (2) - Markdown","date":"2021-03-12T20:00:00+08:00","locale":"en","readTime":3,"excerpt":"\u003cp\u003eParsing and displaying Markdown files are one of the most important things in building a personal website, because all my...\u003c/p\u003e"},{"slug":"2021-2-19-mock-requestanimationframe-in-jest","title":"Mock requestAnimationFrame in Jest","date":"2021-02-19T10:00:00+08:00","locale":"en","readTime":1,"excerpt":"\u003cp\u003eWhen I wrote test for my tiny rhythm game, I realized that all the browser based actions needed to be...\u003c/p\u003e"}]},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"2021-3-10-build-my-website-nextjs"},"buildId":"SnMkXRgSjB967-2Ooa8VT","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-ef3d50462330da67074a.js"></script><script src="/_next/static/chunks/main-e903dbcb0f26f07bddca.js" async=""></script><script src="/_next/static/chunks/webpack-245f049e565ebf942e09.js" async=""></script><script src="/_next/static/chunks/framework.29f9e2f3d4a33bafbaa5.js" async=""></script><script src="/_next/static/chunks/commons.449049b2eba38352d9f4.js" async=""></script><script src="/_next/static/chunks/pages/_app-8c930b98cabfdb7a913b.js" async=""></script><script src="/_next/static/chunks/cb1608f2.16ad8215560a85b40620.js" async=""></script><script src="/_next/static/chunks/a9a7754c.dec6fcf45fa1bcf7c2c8.js" async=""></script><script src="/_next/static/chunks/eda77bfa782fcce19c31e9417d5ccf0cdb548971.a781f33eec1afd4f91b3.js" async=""></script><script src="/_next/static/chunks/8410e8da63518be12bbb03b338cbeeeaa2b87d98.22e74b4b4510f82d44b7.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-a69c9fc3973d7a021c84.js" async=""></script><script src="/_next/static/SnMkXRgSjB967-2Ooa8VT/_buildManifest.js" async=""></script><script src="/_next/static/SnMkXRgSjB967-2Ooa8VT/_ssgManifest.js" async=""></script></body></html>