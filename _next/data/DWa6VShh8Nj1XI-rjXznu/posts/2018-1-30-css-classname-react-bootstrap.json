{"pageProps":{"post":{"title":"Customize CSS Class In React-Bootstrap Under CSS-Modules","date":"2018-01-30T13:00:00+08:00","slug":"2018-1-30-css-classname-react-bootstrap","categories":["Front-End"],"readTime":2,"content":"<p>For a quick start, I used <a href=\"https://github.com/chentsulin/electron-react-boilerplate\" rel=\"noopener noreferrer\" target=\"_blank\"><strong>electron-react-boilerplate</strong></a> as the basis for developing my tiny <strong>smart-todo</strong> app, which however brought me some trouble with css class names.</p>\n<ol>\n<li>css won't work when assigning class names of string type directly to 'className' prop of the react component.</li>\n<li>css won't work when customizing css class of the children inside the react component.</li>\n</ol>\n<p>After a hard search and try, I found the reason and solution.</p>\n<p>First I will introduce some concept and packages.</p>\n<h4 id=\"section-1-css-in-react\">1. css in react</h4>\n<p>There are basically 2 ways to style in react components:</p>\n<ol>\n<li><p><strong><a href=\"https://reactjs.org/docs/faq-styling.html\" rel=\"noopener noreferrer\" target=\"_blank\">regular css stylesheets</a></strong></p>\n<p>By importing css stylesheets files, we can pass a string as the <code>className</code> prop of a component.</p>\n<p>Class names can be multiple. There's an effective package <a href=\"https://github.com/JedWatson/classnames\" rel=\"noopener noreferrer\" target=\"_blank\">classnames</a> for conditionally joining classNames together.</p></li>\n<li><p><strong><a href=\"https://reactjs.org/docs/dom-elements.html#style\" rel=\"noopener noreferrer\" target=\"_blank\">inline styles</a></strong></p>\n<p>We can pass a js object as the <code>style</code> prop of the component.</p></li>\n</ol>\n<h4 id=\"section-2-css-moduleshttpsgithubcomcss-modulescss-modules\">2. <a href=\"https://github.com/css-modules/css-modules\" rel=\"noopener noreferrer\" target=\"_blank\">css-modules</a></h4>\n<p>A css module is a CSS file in which all class names and animation names are scoped locally by default. It added additional naming strategies to the class names, which can also customized by developers themselves.</p>\n<pre><code>/* home.css */\n.container {\n  ...\n}\n.mainSection {\n  ...\n}\n.toolSection {\n  ...\n}</code></pre>\n<pre><code class=\"javascript language-javascript\">import styles from './home.css'\n\n...\n&lt;div className={styles.container}&gt;\n  &lt;div className={styles.mainSection}&gt;&lt;MainSection/&gt;&lt;/div&gt;\n  &lt;div className={styles.toolSection}&gt;&lt;ToolSection/&gt;&lt;/div&gt;\n&lt;/div&gt;\n...</code></pre>\n<p><img loading=\"lazy\" src=\"/blog/assets/img-css-classnames/css-module-name.png\" alt=\"\"></p>\n<p>In webpack config, the <a id=\"webpack-cssmodule\">naming strategy</a> can be customized:</p>\n<pre><code class=\"javascript language-javascript\">{\n  test: /^((?!\\.global).)*\\.css$/,\n  use: [\n    {\n      loader: 'style-loader'\n    },\n    {\n      loader: 'css-loader',\n      options: {\n        modules: true,\n        sourceMap: true,\n        importLoaders: 1,\n        localIdentName: '[name]__[local]__[hash:base64:5]',\n      }\n    },\n  ]\n},</code></pre>\n<p>It also provide a way to speicify <code>global</code> and <code>local</code> to the selectors in a css module.</p>\n<pre><code>:global(.globalclassname) {\n  ...\n}\n:local(.localclassname) {\n  ...\n}</code></pre>\n<p>If <code>global</code> specified, the selector is scoped globally, whose identifier name will not be changed by the naming strategy.</p>\n<h4 id=\"section-3-react-css-moduleshttpsgithubcomgajusreact-css-modules\">3. <a href=\"https://github.com/gajus/react-css-modules\" rel=\"noopener noreferrer\" target=\"_blank\">react-css-modules</a></h4>\n<p>By introducing css-modules, there are some annoy limitations for styling components. This is a convinient utility to make up for the disadvantages. </p>\n<p>I used the light package called <strong><a href=\"https://github.com/gajus/babel-plugin-react-css-modules\" rel=\"noopener noreferrer\" target=\"_blank\">babel-plugin-react-css-modules</a></strong>,  as it has a lot smaller performance overhead and fullfills my requirements.</p>\n<p>I can modify the example above as follows:</p>\n<pre><code class=\"javascript language-javascript\">import './home.css'\n\n...\n&lt;div styleName='container'&gt;\n  &lt;div styleName='mainSection'&gt;&lt;MainSection/&gt;&lt;/div&gt;\n  &lt;div styleName='toolSection'&gt;&lt;ToolSection/&gt;&lt;/div&gt;\n&lt;/div&gt;\n...</code></pre>\n<p><strong>Attention here!</strong> See <a href=\"https://github.com/gajus/babel-plugin-react-css-modules#how-does-it-work\" rel=\"noopener noreferrer\" target=\"_blank\">How does it work</a>.</p>\n<p>The <code>styleName</code> will be parsed to the <code>className</code> finally. If the result className doesn't meet the rules of the css-modules naming strategy, the right css style will not be found. So a configuration in <code>.babelrc</code> is required:</p>\n<pre><code class=\"javascript language-javascript\">\"plugins\": [\n  [\"react-css-modules\", {\n    \"generateScopedName\":\"[name]__[local]__[hash:base64:5]\"\n  }]\n],</code></pre>\n<p>The value of <code>generateScopedName</code> should be the same as that of <code>localIdentName</code> decribed <a href=\"#webpack-cssmodule\">above</a>.</p>\n<h4 id=\"section-solutions-to-the-2-questions\">Solutions to the 2 Questions</h4>\n<ol>\n<li><p>In <strong>electron-react-boilerplate</strong>, it uses css-modules. So all selectors defined in <code>*.css</code> files are locally scoped and changed by name, whereby the string value directly passed to the <code>className</code> don't match the changed selector's name. </p>\n<p>We should use <code>className={styles.classname}</code>, or we can ask <a href=\"https://github.com/gajus/react-css-modules\" rel=\"noopener noreferrer\" target=\"_blank\">react-css-modules</a> for help.</p></li>\n<li><p>The child component of a react component sometimes is classNamed with a globally scoped class (see some source code examples in <a href=\"https://github.com/react-bootstrap/react-bootstrap\" rel=\"noopener noreferrer\" target=\"_blank\">react-bootstrap</a>. If we want to override the styles, we can't specify the selector's name directly in a css module because it is locally scoped and will be changed name. </p>\n<p>We should use <code>:global(.classname)</code> instead.</p></li>\n</ol>\n<h4 id=\"section-analogy-between-css-and-shader\">Analogy between css and shader</h4>\n<p>As before I wrote some shaders for Unity games, it is seemly same annoying to write css styles. They are both used to define the looks of elements to render. They are both difficult to debug like scripts. Maybe most of fresh developers waste lots of time in try. But after working out a friendly style, it is considerably satified. How do you think?</p>"},"postNav":{"previous":"/posts/2018-1-20-orthographic-camera-computing","next":"/posts/2018-3-31-thread-in-unity"},"morePosts":[{"slug":"2021-3-14-build-my-website-style","title":"How To Build My Own Website (3) - Style","date":"2021-03-14T20:00:00+08:00","locale":"en","excerpt":"This article illustrates how I style my own website using Tailwindcss framework, make theme color configurable, and apply interactive animations.","readTime":2},{"slug":"2021-3-12-build-my-website-markdown","title":"How To Build My Own Website (2) - Markdown","date":"2021-03-12T20:00:00+08:00","locale":"en","readTime":3,"excerpt":"<p>Parsing and displaying Markdown files are one of the most important things in building a personal website, because all my...</p>"},{"slug":"2021-3-10-build-my-website-nextjs","title":"How To Build My Own Website (1) - Next.js","date":"2021-03-10T20:00:00+08:00","locale":"en","readTime":4,"excerpt":"<p>I had always dreamed of building my own website, to express myself, to keep memory of what I have done,...</p>"},{"slug":"2021-2-19-mock-requestanimationframe-in-jest","title":"Mock requestAnimationFrame in Jest","date":"2021-02-19T10:00:00+08:00","locale":"en","readTime":1,"excerpt":"<p>When I wrote test for my tiny rhythm game, I realized that all the browser based actions needed to be...</p>"}]},"__N_SSG":true}