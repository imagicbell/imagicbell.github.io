{"pageProps":{"post":{"title":"Algorithm Notes: Understanding of Binary Search","date":"2020-07-10T20:00:00+08:00","slug":"2020-7-10-algorithm-binary-search","categories":["Algorithm"],"readTime":4,"content":"<h3 id=\"section-background\">Background</h3>\n<p>Recently, I have recovered my algorithm praticing. It's like something is messing in my mind, maybe due to the shallow understanding before. When I tried to implement a binary search to find the first number that is not less than <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span></span></span></span></span>, I failed several times. Then I realized that I had to make it clear.</p>\n<p>Binary Search is an extremely efficient algorithm for searching a particular number in a sorted array, as it reduces the time complexity from <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span style=\"margin-right: 0.02778em;\" class=\"mord mathdefault\">O</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span></span> to <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(logn)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span style=\"margin-right: 0.02778em;\" class=\"mord mathdefault\">O</span><span class=\"mopen\">(</span><span style=\"margin-right: 0.01968em;\" class=\"mord mathdefault\">l</span><span class=\"mord mathdefault\">o</span><span style=\"margin-right: 0.03588em;\" class=\"mord mathdefault\">g</span><span class=\"mord mathdefault\">n</span><span class=\"mclose\">)</span></span></span></span></span>. </p>\n<p>I watched two videos which gives through explanation about binary search, but with slightly difference. </p>\n<p>Implementation from <a href=\"https://www.youtube.com/watch?v=v57lNF2mb_s&amp;t=564s\" rel=\"noopener noreferrer\" target=\"_blank\">花花酱</a>.</p>\n<pre><code class=\"javascript language-javascript\">L = 0; R = N;\nwhile (L &lt; R) {\n  mid = L + (R-L)/2;\n  if (nums[mid] &gt;= X)\n    R = mid;\n  else \n    L = mid + 1;\n}\nreturn L;</code></pre>\n<p>Implementation from <a href=\"https://www.youtube.com/channel/UCBr_Fu6q9iHYQCh13jmpbrg\" rel=\"noopener noreferrer\" target=\"_blank\">Errichto</a></p>\n<pre><code class=\"javascript language-javascript\">L = 0; R = N - 1;\nans = -1;\nwhile (L &lt;= R) {\n  mid = L + (R-L)/2;\n  if (nums[mid] &gt;= X) {\n    ans = mid;\n    R = mid - 1;\n  } else {\n    L = mid + 1;\n  }\n}\nreturn ans;</code></pre>\n<h3 id=\"section-questions\">Questions</h3>\n<p>I was confused by 3 questions.</p>\n<ol>\n<li>Why it is <code>mid = L + (R-L)/2</code>, not <code>mid = (L+R)/2</code>. </li>\n<li>Why in <em>花花酱</em>‘'s version it's <code>R = N, while(L&lt;R), R = mid</code>, while in <em>Errichto</em>'s version it's <code>R = N - 1, while(L&lt;=R), R=mid-1</code>.</li>\n<li>why in <em>花花酱</em>‘'s version <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span></span> is returned as the answer.</li>\n</ol>\n<h3 id=\"section-explanation\">Explanation</h3>\n<p><strong>The first question</strong> is easy to explain. It is to avoid the overflow of the sum of <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span></span> and <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.00773em;\" class=\"mord mathdefault\">R</span></span></span></span></span>.</p>\n<p><strong>The second question</strong> seemed a little bit silly after I got it clear. It's just about the current range for searching the target, and the terminaion condition shouldn't miss the very last element to be tested. For example, in <em>花花酱</em>‘'s version, the search range is <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo separator=\"true\">,</mo><mi>R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[L, R)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">L</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right: 0.16666666666666666em;\"></span><span style=\"margin-right: 0.00773em;\" class=\"mord mathdefault\">R</span><span class=\"mclose\">)</span></span></span></span></span>. So:</p>\n<ol>\n<li><span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.00773em;\" class=\"mord mathdefault\">R</span></span></span></span></span> starts from <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.10903em;\" class=\"mord mathdefault\">N</span></span></span></span></span>, which is the length of the array, not being reached by index. </li>\n<li><span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span></span> is always less than <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.00773em;\" class=\"mord mathdefault\">R</span></span></span></span></span>, or the while loop should be terminated.</li>\n<li>When updating <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.00773em;\" class=\"mord mathdefault\">R</span></span></span></span></span>, it means we update the search range into <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo separator=\"true\">,</mo><mi>m</mi><mi>i</mi><mi>d</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[L, mid)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">L</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right: 0.16666666666666666em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mclose\">)</span></span></span></span></span>. <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">mid</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.69444em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span></span></span></span></span> is not included, as it is already been examined. The same with updating <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span></span>, so it should be <code>L=mid+1</code>, as <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">mid</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.69444em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span></span></span></span></span> shouldn't be included.</li>\n</ol>\n<p>In <em>Errichto</em>'s version, the range is <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo separator=\"true\">,</mo><mi>R</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[L, R]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">L</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right: 0.16666666666666666em;\"></span><span style=\"margin-right: 0.00773em;\" class=\"mord mathdefault\">R</span><span class=\"mclose\">]</span></span></span></span></span>. I will save the explanation here.</p>\n<p><strong>The third question</strong> is really where the tricky is. First I tried to understand <em>Errichto</em>'s version, which is quite straight forward. It narrows the search range gradually and updates the answer value with the <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">mid</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.69444em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span></span></span></span></span>  each time it is not less than <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span></span></span></span></span>, utils there is no more value to search. While the right boundary reduces, the answer approaches to the smallest value that is not less than <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span></span></span></span></span>. Let's take an example:</p>\n<pre><code>nums: 2, 3, 5, 6, 8, 10, 12\nX: 4\n\nfirst loop:  L = 0, R = 6, mid = 3, ans = 6\nsecond loop: L = 0, R = 2, mid = 1, ans = 6\nthird loop:  L = 2, R = 2, mid = 2, ans = 5\nout of loop, so ans = 5</code></pre>\n<p>When it comes to <em>花花酱</em>‘'s version, it reduces one variable and simply returns <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span></span>. Actually, this is what binary search commonly does. So we can also reduce the variable of <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi>n</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">ans</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.43056em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">s</span></span></span></span></span> in <em>Errichto</em>'s version and return <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span></span>. But why <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span></span> is the answer? Let me explain. I'll take the search range as <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo separator=\"true\">,</mo><mi>R</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[L, R]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">L</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right: 0.16666666666666666em;\"></span><span style=\"margin-right: 0.00773em;\" class=\"mord mathdefault\">R</span><span class=\"mclose\">]</span></span></span></span></span>.</p>\n<p>Suppose we are in the last loop. </p>\n<p>Then <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mo>=</mo><mo>=</mo><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">L == R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span><span class=\"mrel\">=</span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.36687em; vertical-align: 0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.00773em;\" class=\"mord mathdefault\">R</span></span></span></span></span> or <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mo>=</mo><mo>=</mo><mi>R</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">L == R - 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span><span class=\"mrel\">=</span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.36687em; vertical-align: 0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.76666em; vertical-align: -0.08333em;\"></span><span style=\"margin-right: 0.00773em;\" class=\"mord mathdefault\">R</span><span class=\"mspace\" style=\"margin-right: 0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right: 0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.64444em; vertical-align: 0em;\"></span><span class=\"mord\">1</span></span></span></span></span>, or there will be another loop.</p>\n<p>Then <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi>i</mi><mi>d</mi><mo>=</mo><mo>=</mo><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">mid == L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.69444em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span><span class=\"mrel\">=</span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.36687em; vertical-align: 0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span></span>.</p>\n<p>There are obviously 2 situations: <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>m</mi><mi>i</mi><mi>d</mi><mo stretchy=\"false\">]</mo><mo>&gt;</mo><mo>=</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">nums[mid] &gt;= X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.36687em; vertical-align: 0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span></span></span></span></span> or <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>m</mi><mi>i</mi><mi>d</mi><mo stretchy=\"false\">]</mo><mo>&lt;</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">nums[mid] &lt; X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span></span></span></span></span>.</p>\n<p>If <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>m</mi><mi>i</mi><mi>d</mi><mo stretchy=\"false\">]</mo><mo>&gt;</mo><mo>=</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">nums[mid] &gt;= X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.36687em; vertical-align: 0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span></span></span></span></span>, then <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>L</mi><mo stretchy=\"false\">]</mo><mo>&gt;</mo><mo>=</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">nums[L] &gt;= X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">L</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.36687em; vertical-align: 0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span></span></span></span></span>. Next we can prove <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>L</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo>&lt;</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">nums[L-1] &lt; X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">L</span><span class=\"mspace\" style=\"margin-right: 0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right: 0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span></span></span></span></span>.</p>\n<ul>\n<li><p>if <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span></span> never changed(equals 0), then it means all the numbers in the array are <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>&gt;</mo><mo>=</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">&gt;=X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.5782em; vertical-align: -0.0391em;\"></span><span class=\"mrel\">&gt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.36687em; vertical-align: 0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span></span></span></span></span>. The first element in the array is obviously the smallest one satisfying <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>&gt;</mo><mo>=</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">&gt;=X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.5782em; vertical-align: -0.0391em;\"></span><span class=\"mrel\">&gt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.36687em; vertical-align: 0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span></span></span></span></span>.</p></li>\n<li><p>if <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span></span> changed, no matter how many times it changed, the last time it changed must be in some loop that went this way:</p>\n<pre><code class=\"javascript language-javascript\">          ...\n          else            // means nums[mid] &lt; x\n              L = mid + 1     // means mid == L - 1\n          ...</code></pre>\n<p>Are we seeing something here? </p>\n<p>Yes, <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>L</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo>=</mo><mo>=</mo><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>m</mi><mi>i</mi><mi>d</mi><mo stretchy=\"false\">]</mo><mo>&lt;</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">nums[L-1] == nums[mid] &lt; X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">L</span><span class=\"mspace\" style=\"margin-right: 0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right: 0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span><span class=\"mrel\">=</span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.36687em; vertical-align: 0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">d</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span></span></span></span></span>. </p>\n<p>So <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>L</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo>&lt;</mo><mi>X</mi><mo>&lt;</mo><mo>=</mo><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>L</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">nums[L-1] &lt; X &lt;= nums[L]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">L</span><span class=\"mspace\" style=\"margin-right: 0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right: 0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.72243em; vertical-align: -0.0391em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.36687em; vertical-align: 0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">L</span><span class=\"mclose\">]</span></span></span></span></span>,  the <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span></span>th element is the smallest one satisfying <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>&gt;</mo><mo>=</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">&gt;= X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.5782em; vertical-align: -0.0391em;\"></span><span class=\"mrel\">&gt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.36687em; vertical-align: 0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span></span></span></span></span>.</p></li>\n</ul>\n<p>If the search range is <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo separator=\"true\">,</mo><mi>R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[L, R)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">L</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right: 0.16666666666666666em;\"></span><span style=\"margin-right: 0.00773em;\" class=\"mord mathdefault\">R</span><span class=\"mclose\">)</span></span></span></span></span>, we could also deduce the result.</p>\n<h3 id=\"section-usage\">Usage</h3>\n<p>The above is a very common usage of binary search, which is to find the <strong>lower bound</strong> of a value in a sorted array. There are some variant usages:</p>\n<ol>\n<li>find the <strong>upper bound</strong>, which is the smallest value satisfying <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mi>s</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mo>&gt;</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">nums[i] &gt; X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 1em; vertical-align: -0.25em;\"></span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">u</span><span class=\"mord mathdefault\">m</span><span class=\"mord mathdefault\">s</span><span class=\"mopen\">[</span><span class=\"mord mathdefault\">i</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right: 0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.68333em; vertical-align: 0em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span></span></span></span></span>. With a slight modification:</li>\n</ol>\n<pre><code class=\"javascript language-javascript\">           ...\n           if (nums[mid] &gt; X)\n               R = mid         // or R = mid - 1 if search range [L, R]\n           ...</code></pre>\n<ol start=\"2\">\n<li>find the first occurance of the target. With adding some code after the while loop:</li>\n</ol>\n<pre><code class=\"js language-js\">   ...\n   return (L &lt; nums.length &amp;&amp; nums[L] === X) ? L : -1;</code></pre>\n<ol start=\"3\">\n<li>find the last occurance of the target. This can be solved by searching the first occurance of <span><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">X+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.76666em; vertical-align: -0.08333em;\"></span><span style=\"margin-right: 0.07847em;\" class=\"mord mathdefault\">X</span><span class=\"mspace\" style=\"margin-right: 0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right: 0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.64444em; vertical-align: 0em;\"></span><span class=\"mord\">1</span></span></span></span></span> and then returning the previous one.</li>\n</ol>\n<pre><code class=\"js language-js\">   while (L &lt;= R) {\n     mid = L + (R-L)/2;\n     if (nums[mid] &gt;= X + 1) \n       R = mid - 1;\n     else \n       L = mid + 1;\n   }\n   return (L &gt; 0 &amp;&amp; nums[L-1] === X) ? L-1 : -1;</code></pre>"},"postNav":{"previous":"/posts/2019-10-3-algorithm-binary-heap","next":"/posts/2020-8-28-ielts-7_5"},"morePosts":[{"slug":"2020-10-7-algorithm-traversal-of-binary-tree","title":"Algorithm Notes: Traversal of Binary Tree","date":"2020-10-07T16:00:00+08:00","locale":"en","readTime":3,"excerpt":"<p>Mostly we know that the traversal of binary tree can be easily done by recursion....</p>"},{"slug":"2019-10-3-algorithm-binary-heap","title":"Algorithm Notes: Binary Heap","date":"2019-10-03T20:00:00+08:00","locale":"en","readTime":2,"excerpt":"<p>A Binary Heap is a complete Binary Tree. It is either a Min Heap, where parent node's value is less...</p>"},{"slug":"2019-9-26-algorithm-kmp","title":"Algorithm Notes: KMP","date":"2019-09-26T20:00:00+08:00","locale":"en","readTime":10,"excerpt":"<p>String searching is one of the most common interview problems. Of course, it can be solved by using the simple...</p>"},{"slug":"2021-6-5-build-my-website-image-opti","title":"How To Build My Own Website (4) - Image Optimization","date":"2021-06-05T20:00:00+08:00","locale":"en","excerpt":"This article illustrates how I applied image optimization to improve the performance of my website.","readTime":2}]},"__N_SSG":true}