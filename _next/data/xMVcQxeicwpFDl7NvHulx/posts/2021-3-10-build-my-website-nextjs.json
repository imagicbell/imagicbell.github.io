{"pageProps":{"post":{"title":"How To Build My Own Website (1) - Next.js","date":"2021-03-10T20:00:00+08:00","slug":"2021-3-10-build-my-website-nextjs","categories":["Front-End"],"readTime":4,"content":"<h2 id=\"section-contents\">Contents</h2>\n<ol>\n<li>The choice of Next.js</li>\n<li><a href=\"/posts/2021-3-12-build-my-website-markdown\" rel=\"noopener noreferrer\" target=\"_blank\">Parse and Display Markdown</a></li>\n<li><a href=\"/posts/2021-3-14-build-my-website-style\" rel=\"noopener noreferrer\" target=\"_blank\">Style my website</a></li>\n</ol>\n<p><br></p>\n<p>I had always dreamed of building my own website, to express myself, to keep memory of what I have done, and to make others know me faster. Although I had self-learned web developing technologies, e.g. html/css, javascript, react, redux, jquery, etc, for a long time, there wasn't a golden chance to start this \"huge\" thing, regarding to the styling, routing, deploying and so on‚Ä¶ <em>All beginnings are hard</em>üòÑ</p>\n<p>I used <a href=\"https://jekyllrb.com/\" rel=\"noopener noreferrer\" target=\"_blank\">Jekyll</a> for my Blog. It's like this:</p>\n<p><img src=\"/blog/assets/img-my-website/1.jpg\" alt=\"\"></p>\n<p>But I am not satisfied with it. To customize the page, I need to give a HTML file, which is inconvenient.</p>\n<p>Recently I met with <a href=\"https://nextjs.org/\" rel=\"noopener noreferrer\" target=\"_blank\">Next.js</a>. It is a <a href=\"https://reactjs.org/\" rel=\"noopener noreferrer\" target=\"_blank\">React</a> framework, which means I can write <strong>React Components</strong>‚úåÔ∏è. After walking through its starter tutorial, which is to create a very simple <strong>blog app</strong>, I found it is the perfect framework that helps me to start my website building. </p>\n<p>This article mainly talks about some <strong>basic features</strong> making it perfect for my website building. Next two articles: <a href=\"/posts/2021-3-12-build-my-website-markdown\" rel=\"noopener noreferrer\" target=\"_blank\">1</a>, <a href=\"/posts/2021-3-14-build-my-website-style\" rel=\"noopener noreferrer\" target=\"_blank\">2</a> will illustrate how I deal with <strong>Markdown</strong> and <strong>Style</strong>.</p>\n<p>In this article, firstly I will talk about some <strong>basic features</strong> making it perfect for my website building. Then I will illustrate how I deploy it to <strong>Github Pages</strong>. </p>\n<h2 id=\"section-page-based-routing-system\">Page-based Routing System</h2>\n<p>In <a href=\"https://nextjs.org/\" rel=\"noopener noreferrer\" target=\"_blank\">Next.js</a>, a <a href=\"https://nextjs.org/docs/basic-features/pages\" rel=\"noopener noreferrer\" target=\"_blank\">page</a> is a React Component placed under <code>/pages</code> directory. This hierarchy makes it clear to separate the page components with those feature components. </p>\n<p>However, what the most powerful  is that it supports <a href=\"https://nextjs.org/docs/routing/dynamic-routes\" rel=\"noopener noreferrer\" target=\"_blank\"><strong>dynamic routes</strong></a>. So:</p>\n<ul>\n<li><p>a page defined as <code>/pages/posts/[slug].js</code> can power all my blog post pages, like <code>/posts/2021-3-10-build-my-website-nextjs</code>, <code>/posts/2021-2-19-mock-requestanimationframe-in-jest</code>, etc.</p></li>\n<li><p>a page defined as <code>/pages/blog/[[...page]].js</code> can power not only  <code>/blog/*</code>, but also <code>/blog</code> and <code>/blog/*/*</code>. So my paginated blog pages can be</p>\n<ul>\n<li><code>/blog</code></li>\n<li><code>/blog/page/2</code>, <code>/blog/page/3</code>, <code>...</code></li>\n<li><code>/blog/front-end</code>, <code>blog/unity</code></li>\n<li><code>/blog/front-end/2</code>, <code>blog/unity/2</code>, <code>...</code></li></ul>\n<p><em>In <code>next.config.js</code>, I can define <code>/blog/page/1</code> redirecting to <code>/blog</code>, <code>/blog/front-end/1</code> redirecting <code>blog/front-end</code>. This is common web flavored</em>.  </p></li>\n<li><p>in React Component, I can obtain the route data by <code>query</code> object, which is accessed by the <code>useRouter</code> hook in <a href=\"https://nextjs.org/docs/api-reference/next/router\" rel=\"noopener noreferrer\" target=\"_blank\"><code>next/router</code></a>. So for the above multi-format routes, I can distinguish them by:</p>\n<pre><code class=\"javascript language-javascript\">// \"/blog\"\nquery: { \"page\": false }\nquery: { \"page\": null }\nquery: { \"page\": [] }\nquery: { \"page\": undefined }\n\n// \"/blog/page/2\", \"/blog/page/3\" ...\nquery: { \"page\": [ 'page', '2'] }\nquery: { \"page\": [ 'page', '3'] }\n\n// \"/blog/front-end\", \"/blog/unity\"\nquery: { \"page\": [ 'front-end' ] }\nquery: { \"page\": [ 'unity' ] }\n\n// \"/blog/front-end/2\", \"/blog/unity/2\"\nquery: { \"page\": [ 'front-end', '2' ] }\nquery: { \"page\": [ 'unity', '2' ] }</code></pre></li>\n</ul>\n<h2 id=\"section-pre-rendering\">Pre-rendering</h2>\n<p><a href=\"https://nextjs.org/\" rel=\"noopener noreferrer\" target=\"_blank\">Next.js</a> generates HTML for each page in advance. There are two forms: <strong>Static Generation</strong> and <strong>Server-side Rendering</strong>. </p>\n<blockquote>\n  <p>The difference is in <strong>when</strong> it generates the HTML for a page.</p>\n  <ul>\n  <li><p><a href=\"https://nextjs.org/docs/basic-features/pages#static-generation-recommended\" rel=\"noopener noreferrer\" target=\"_blank\"><strong>Static Generation (Recommended)</strong></a>: The HTML is generated at <strong>build time</strong> and will be reused on each request.</p></li>\n  <li><p><a href=\"https://nextjs.org/docs/basic-features/pages#server-side-rendering\" rel=\"noopener noreferrer\" target=\"_blank\"><strong>Server-side Rendering</strong></a>: The HTML is generated on <strong>each request</strong>.</p></li>\n  </ul>\n</blockquote>\n<p>Commonly a personal website is static, which is generated at build time. </p>\n<h3 id=\"section-data-fetching\">Data Fetching</h3>\n<p><a href=\"https://nextjs.org/\" rel=\"noopener noreferrer\" target=\"_blank\">Next.js</a> also provides two ways to <a href=\"https://nextjs.org/docs/basic-features/data-fetching\" rel=\"noopener noreferrer\" target=\"_blank\">fetch external data</a> for pre-rendering, with which I can generate blog pages by reading the local markdown files. </p>\n<ol>\n<li><p><code>getStaticPaths</code> to specify which paths to pre-render. For example, in <code>/pages/posts/[slug].js</code>, the below code includes paths for all post pages.</p>\n<pre><code class=\"javascript language-javascript\"> export async function getStaticPaths() {\n   const posts = getAllPosts(['slug'])\n\nreturn {\n     paths: posts.map((post) =&gt; {\n       return {\n         params: {\n           slug: post.slug,\n         },\n       }\n     }),\n     fallback: false,\n   }\n }</code></pre></li>\n<li><p><code>getStaticProps</code> to pass external data to the <code>props</code> of the page's React Component. For example, in <code>/pages/posts/[slug].js</code>, the below code passes the <code>post</code> data to the <code>Post</code> component for rendering.</p>\n<pre><code class=\"javascript language-javascript\">  function Post({ post }) {\n    //render the post\n  }\n\n  export async function getStaticProps({ params }) {\n    let post = getPostBySlug(params.slug);\n    return {\n      props: {\n        post,\n      }\n    }\n  }</code></pre>\n<p>The parameter <code>params</code> is from the <code>params</code> in the returned object of <code>getStaticPaths</code>.</p></li>\n</ol>\n<h2 id=\"section-fast-refresh\">Fast Refresh</h2>\n<p><a href=\"https://nextjs.org/\" rel=\"noopener noreferrer\" target=\"_blank\">Next.js</a> enables <a href=\"https://nextjs.org/docs/basic-features/fast-refresh\" rel=\"noopener noreferrer\" target=\"_blank\">Fast Refresh</a> to allow me to glance at what I have just done. Think about this scenario: </p>\n<p><em>I am writing this blog, and I want to see what it is like when it deploys.</em></p>\n<p><em>ps. <a href=\"[Jekyll](https://jekyllrb.com/)\" rel=\"noopener noreferrer\" target=\"_blank\">Jekyll</a> enables fast refresh, too.</em></p>\n<h2 id=\"section-its-react\">It's React!</h2>\n<p>There is no need to illustrate how <a href=\"https://reactjs.org/\" rel=\"noopener noreferrer\" target=\"_blank\">React</a> makes it easier to develop web pages here. I just want to say it is at the top of my list.</p>\n<h2 id=\"section-deploy-to-github-pages\">Deploy To Github Pages</h2>\n<p>Next.js app is recommended to deploy on <a href=\"https://vercel.com/\" rel=\"noopener noreferrer\" target=\"_blank\">Vercel</a>, because it is an all-in-one platform developed by the same team. However, in spite of  <a href=\"https://vercel.com/\" rel=\"noopener noreferrer\" target=\"_blank\">Vercel</a>, I also want to deploy it on Github Pages, where my old Blog is, until I have my own domain.</p>\n<p><a href=\"https://github.com/imagicbell/deploy-nextjs-to-github-pages\" rel=\"noopener noreferrer\" target=\"_blank\">Here</a> is how I did.</p>\n<h2 id=\"section-why-not-use-existing-website-builder\">Why Not Use Existing Website Builder</h2>\n<h4 id=\"section-1-it-is-pricey\">1. It is Pricey!</h4>\n<p>Although some popular website builders, like <a href=\"https://www.wix.com/\" rel=\"noopener noreferrer\" target=\"_blank\">Wix</a> and <a href=\"https://wordpress.com/\" rel=\"noopener noreferrer\" target=\"_blank\">WordPress</a>, provide free services to create websites, the services are limited, unless you purchase for the Premium Plans. <em>This is always what happens</em>üòÖ. ‚Äã</p>\n<h4 id=\"section-2-i-am-not-advertising\">2. I am Not Advertising.</h4>\n<p>In my plans for the website, there is no intension for any advertisement. So it doesn't need to be fancy. In fact, I prefer it to be simple but tech-favored.</p>\n<h4 id=\"section-3-it-is-not-under-my-control\">3. It is Not Under My Control.</h4>\n<p>There are indeed many templates on those website builders, which save us plenty of time to design and development websites. But they are just as what they are. I'd like to do what ever I want on my own website. It should be limitlessüòâ.</p>"},"postNav":{"previous":"/posts/2021-2-19-mock-requestanimationframe-in-jest","next":"/posts/2021-3-12-build-my-website-markdown"},"morePosts":[{"slug":"2021-3-14-build-my-website-style","title":"How To Build My Own Website (3) - Style","date":"2021-03-14T20:00:00+08:00","locale":"en","excerpt":"This article illustrates how I style my own website using Tailwindcss framework, make theme color configurable, and apply interactive animations.","readTime":2},{"slug":"2021-3-12-build-my-website-markdown","title":"How To Build My Own Website (2) - Markdown","date":"2021-03-12T20:00:00+08:00","locale":"en","readTime":3,"excerpt":"<p>Parsing and displaying Markdown files are one of the most important things in building a personal website, because all my...</p>"},{"slug":"2021-2-19-mock-requestanimationframe-in-jest","title":"Mock requestAnimationFrame in Jest","date":"2021-02-19T10:00:00+08:00","locale":"en","readTime":1,"excerpt":"<p>When I wrote test for my tiny rhythm game, I realized that all the browser based actions needed to be...</p>"},{"slug":"2021-1-7-rythm-game","title":"Create A Classical Rythm Game With React Hooks and Tone.js","date":"2021-01-07T21:00:00+08:00","locale":"en","ogImage":"/blog/assets/img-rythm-game/1.jpg","readTime":5,"excerpt":"<p>Recently I've been obsessed with React Hooks, and then I came up with an idea to create a classical rythm...</p>"}]},"__N_SSG":true}